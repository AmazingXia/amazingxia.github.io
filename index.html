<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>魔方</title>
  <script src="./lib/cube.min.js"></script>
  <script src="./lib/solve.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    html,
    body {
      overflow: hidden;
      height: 100%;
      touch-action: none;
      background: rgb(134, 122, 209);
      position: relative;
    }

    ul {}

    li {
      list-style: none;
    }

    /* { front: { backGround: rgba(0,255,255,.5) },
     back: { backGround: rgba(153,204,255,.5) },
     left: { backGround: rgba(128,0,128,.5) },
     right: { backGround: rgba(255,0,255,.5) },
     top: { backGround: rgba(255,153,204,.5) },
     bottom: { backGround: rgba(0,204,255,.5) },
      inner: { backGround: rgba(100,100,100,.5) } } */
    .gray {

      background-color: rgb(90, 85, 94);
      /* backGround: rgba(0,255,255,.8); */
    }

    .blue {
      background-color: rgb(62, 132, 224);
      /* backGround: rgba(255,0,255,.8); */
    }

    .red {

      background-color: #F7685B;
      /* backGround: rgba(153,204,255,.8); */
    }

    .pink {
      background-color: rgb(245, 142, 202);
      /* backGround: rgba(255, 153, 204, .8); */
    }

    .green {
      background-color: #67C23A;
      /* backGround: rgba(0,204,255,.8); */
    }

    .yellow {
      background-color: #FFB946;
      /* backGround: rgba(100,100,100,.8); */
    }

    .base {
      position: relative;
      height: 242px;
      width: 242px;
      margin: 0 auto;
      margin-top: 180px;
      transform-style: preserve-3d;
      user-select: none;
    }

    .base-public {
      position: absolute;
      top: 0;
      left: 0;
      width: 240px;
      height: 240px;
      box-sizing: border-box;
      transform-style: preserve-3d;
      transform-origin: 120px 120px;
    }

    .base-base {
      /* background-color: #F7685B; */
      transform: rotate3d(1, 0, 0, 90deg);
    }

    .base-side {
      /* background-color: #67C23A; */
      transform: rotate3d(0, 1, 0, -90deg) translateY(550px);
      transform: rotate3d(0, 1, 0, -90deg);
    }

    .base-front {
      /* background-color: #FFB946; */
      /* transform: translateX(400px); */
    }

    .cube {
      position: absolute;
      top: 0;
      left: 0;
      width: 80px;
      height: 80px;
      box-sizing: border-box;
      transform-style: preserve-3d;
    }

    .public {
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
      left: 0;
      text-align: center;
      line-height: 80px;
      font-size: 24px;
      border: 4px solid #000000;
      border-radius: 6px;
      box-sizing: border-box;
      text-align: center;
      line-height: 80px;
      user-select: none;
    }



    .left {
      width: 240px;
      height: 240px;
      /* transform: translate3d(0px, 0px, 80px); */
      transform-style: preserve-3d;
      transform-origin: 50% 50%;
      transition: transform 0.2s linear;
      position: absolute;
      left: 0;
      top: 0;
      /* background-color: rgb(90, 85, 94); */
      /* background-color: rgb(62, 132, 224); */
      transform: translateZ(33.33%) rotateZ(0deg);
    }

    .center {
      width: 240px;
      height: 240px;
      transform: translate3d(0px, 0px, 0px);
      transform-style: preserve-3d;
      transform-origin: 50% 50%;
      transition: transform 0.2s linear;
      position: absolute;
      left: 0;
      top: 0;
      /* background-color: rgb(90, 85, 94); */
      transform: translateZ(0) rotateZ(0deg);
    }

    .right {
      width: 240px;
      height: 240px;
      transform-style: preserve-3d;
      transform-origin: 50% 50%;
      transition: transform 0.2s linear;
      position: absolute;
      left: 0;
      top: 0;
      /* background-color: #F7685B; */
      transform: translateZ(-33.33%) rotateZ(0deg);
    }



    /* .cube-first {
              transform: translate3d(0px, 0px, 120px);
          }
          .cube-second {
              transform: translate3d(0px, 0px, 40px);
          }
          .cube-third {
              transform: translate3d(0px, 0px, -40px);
          } */
    .cube-first-first,
    .cube-second-first,
    .cube-third-first {
      left: 0px;
      top: 0px;
    }

    .cube-first-second,
    .cube-second-second,
    .cube-third-second {
      left: 80px;
    }

    .cube-first-third,
    .cube-second-third,
    .cube-third-third {
      left: 160px;
    }

    .cube-first-forth,
    .cube-second-forth,
    .cube-third-forth {
      left: 0px;
      top: 80px;
    }

    .cube-first-five,
    .cube-second-five,
    .cube-third-five {
      left: 80px;
      top: 80px;
    }

    .cube-first-six,
    .cube-second-six,
    .cube-third-six {
      left: 160px;
      top: 80px;
    }

    .cube-first-seven,
    .cube-second-seven,
    .cube-third-seven {
      left: 0px;
      top: 160px;
    }

    .cube-first-eight,
    .cube-second-eight,
    .cube-third-eight {
      left: 80px;
      top: 160px;
    }

    .cube-first-nine,
    .cube-second-nine,
    .cube-third-nine {
      left: 160px;
      top: 160px;
    }

    .cube .public:nth-child(1) {
      transform-origin: 0px 40px;
      transform: translate3d(0px, 0px, 40px) rotate3d(0, 1, 0, 90deg);
    }

    .cube .public:nth-child(2) {
      transform-origin: 40px 40px;
      transform: rotate3d(1, 0, 0, 90deg) translate3d(0px, 0px, -40px);
    }

    .cube .public:nth-child(3) {
      transform-origin: 40px 0px;
      transform: rotate3d(0, 1, 0, 90deg) translate3d(0px, 0px, 40px);
    }

    .cube .public:nth-child(4) {
      transform-origin: 40px 40px;
      transform: rotate3d(1, 0, 0, 90deg) translate3d(0px, 0px, 40px);
    }

    .cube .public:nth-child(5) {
      transform: translate3d(0px, 0px, -40px);
    }

    .cube .public:nth-child(6) {
      transform: translate3d(0px, 0px, 40px);
    }

    .el-message {
      width: max-content;
      box-sizing: border-box;
      border: 1px solid #ebeef5;
      position: fixed;
      left: 50%;
      top: 20px;
      opacity: 0;
      transform: translateX(-50%) translateY(-40px);
      transition: opacity .3s, -webkit-transform .4s;
      transition: opacity .3s, transform .4s;
      transition: opacity .3s, transform .4s, -webkit-transform .4s;
      padding: 5px 15px;
      display: flex;
      align-items: center;
      border-radius: 4px;
      overflow: hidden;
      background-color: #f0f9eb;
      border-color: #e1f3d8;
    }

    .el-message--success .el-message__content {
      color: #67c23a;
      margin: 0;
      padding: 0;
      font-size: 14px;
      line-height: 1;
    }

    .success {
      width: 38px;
      height: 38px;
      margin: 0;
      padding: 0;
      vertical-align: middle;
    }

    p {
      display: block;
      margin-block-start: 1em;
      margin-block-end: 1em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
    }

    .utils {
      position: absolute;
      left: 20px;
      top: 20px;
      text-align: center;
      padding: 0 16px;
      color: #fff;
      font-size: 16px;
      user-select: none;
    }

    .list {
      width: auto;
      position: absolute;
      left: 0;
      top: 110%;
      width: 110px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: stretch;
      background-color: #fff;
      border: 1px solid #ebeef5;
      border-radius: 4px;
      box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);
    }

    .item {
      list-style: none;
      line-height: 36px;
      padding: 5px 20px;
      margin: 0;
      color: #606266;
      cursor: pointer;
      outline: 0;
    }

    .item:hover {
      background-color: #ecf5ff;
      color: #66b1ff;
    }
  </style>
</head>

<body>
  <div class="base" id="base" style="transform: rotateX(140deg) rotateY(-296deg);">
    <div class="base-base base-public">
      <div class="left">
        <div class="cube cube-first cube-first-first">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-second">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-third">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-forth">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-five">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-six">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-seven">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-eight">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-nine">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
      </div>

      <!-- <div class="center" style="transform: translateZ(0px) rotateZ(0deg)"> -->
      <div class="center">
        <div class="cube cube-second cube-second-first">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-second">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-third">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-forth">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-five">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-six">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-seven">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-eight">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-nine">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
      </div>

      <!-- <div class="right" style="transform: translateZ(-80px) rotateZ(0deg)"> -->
      <div class="right">
        <div class="cube cube-third cube-third-first">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-second">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-third">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-forth">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-five">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-six">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-seven">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-eight">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-nine">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
      </div>
    </div>

    <div class="base-side base-public">

      <!-- <div class="left" style="transform: translateZ(80px) rotateZ(0deg)"> -->
      <div class="left">
        <div class="cube cube-first cube-first-first">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-second">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-third">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-forth">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-five">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-six">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-seven">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-eight">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-nine">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
      </div>
      <!-- <div class="center" style="transform: translateZ(0px) rotateZ(0deg)"> -->
      <div class="center">
        <div class="cube cube-second cube-second-first">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-second">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-third">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-forth">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-five">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-six">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-seven">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-eight">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-nine">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
      </div>

      <!-- <div class="right" style="transform: translateZ(-80px) rotateZ(0deg)"> -->
      <div class="right">
        <div class="cube cube-third cube-third-first">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-second">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-third">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-forth">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-five">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-six">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-seven">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-eight">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-nine">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
      </div>
    </div>

    <div class="base-front base-public">

      <!-- <div class="left" style="transform: translateZ(80px) rotateZ(0deg)"> -->
      <div class="left">
        <div class="cube cube-first cube-first-first">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-second">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-third">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-forth">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-five">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-six">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-seven">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-eight">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-first cube-first-nine">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
      </div>

      <!-- <div class="center" style="transform: translateZ(0px) rotateZ(0deg)"> -->
      <div class="center">
        <div class="cube cube-second cube-second-first">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-second">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-third">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-forth">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-five">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-six">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-seven">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-eight">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-second cube-second-nine">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
      </div>

      <!-- <div class="right" style="transform: translateZ(-80px) rotateZ(0deg)"> -->
      <div class="right">
        <div class="cube cube-third cube-third-first">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-second">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-third">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-forth">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-five">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-six">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-seven">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-eight">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
        <div class="cube cube-third cube-third-nine">
          <div class="public gray">
          </div>
          <div class="public blue">
          </div>
          <div class="public red">
          </div>
          <div class="public pink">
          </div>
          <div class="public green">
          </div>
          <div class="public yellow">
          </div>
        </div>
      </div>

    </div>

  </div>
  <div class="el-message el-message--success" style="z-index: 2002;">
    <img src="./img/succees.png" alt="" class="success">
    <p class="el-message__content">congratulation!!!</p>
  </div>
  <div class="utils">
    功能
    <ul class="list" style="display: none;">
      <li class="item">随机打乱</li>
      <li class="item">自动还原</li>
      <!-- <li class="item">查看原理</li> -->
    </ul>
  </div>
  <script>
    //  第一个参数的意思  true|false  事件捕获阶段冒泡阶段

    // 第二个参数  true|flase  不能调用 | 可以调用preventDefault()

    // 第三个参数 once  true|false 只能执行一次fn  | 不限制

    // console.log('document.body.offsetWidth', document.body.offsetWidth)


    class Base {
      constructor(baseNode) {
        this.baseNode = baseNode

        this.baseList = this.baseNode.children
        this.levelList = this.baseList[0]['children']
        this.firstBase = this.baseNode.firstElementChild

        this.endTarchDom = null
        this.startTarchDom = null
        this.rotateDirection = [0, 0, 0]

        this.colorPosition = [null, null, null, null, null]

        this.colorMap = {}

        this.timer = null
      }

      // 消息显示工具函数
      showMessage(text, duration = 2000) {
        const message = document.querySelector('.el-message')
        const messageContent = message.querySelector('.el-message__content')
        messageContent.textContent = text
        message.style.opacity = '1'
        message.style.transform = 'translateX(-50%) translateY(0px)'

        if (duration > 0) {
          setTimeout(() => {
            const message = document.querySelector('.el-message')
            message.style.opacity = '0'
            message.style.transform = 'translateX(-50%) translateY(-40px)'
          }, duration)
        }
      }

      init() {

        document.body.addEventListener('touchmove', function (e) {
          e.preventDefault();
        }, {
          capture: false,
          passive: false,
          once: false
        });

        window.onbeforeunload = function (e) {
          localStorage.setItem('colorMap', this.colorMap)
        };

        //禁止页面滑动
        history.pushState(null, null, document.URL);
        window.addEventListener('popstate', function () {
          history.pushState(null, null, document.URL);
        });
        this.addBtnEvent()

        this.bindRotate()
        this.setColorSet()

        this.setCubeColorByColorSet(0)
        this.setCubeColorByColorSet(1)
      }

      addBtnEvent() {
        const utils = document.querySelector('.utils')
        const list = utils.firstElementChild
        const disturbe = list.firstElementChild
        const solve = list.children[1] // 自动还原按钮

        // utils.addEventListener('touch', (e) => {
        //   e.preventDefault();
        //   if (list.style.display === 'none') {
        //     list.style.display = 'block'
        //   } else {
        //     list.style.display = 'none'
        //   }
        // }, false)

        utils.addEventListener('click', (e) => {
          e.preventDefault();

          if (list.style.display === 'none') {
            list.style.display = 'block'
          } else {
            list.style.display = 'none'
          }
        }, false)

        disturbe.addEventListener('click', (e) => {
          e.preventDefault();
          this.disturbe()
        }, false)

        solve.addEventListener('click', (e) => {
          e.preventDefault();
          this.solve()
        }, false)
      }

      setColorSet() {
        try {
          const firstList = this.baseList

          let index = 1;

          for (let i = 0, len = firstList.length; i < len; i++) { // 3个立方体base

            const secondList = firstList[i].children

            if (i !== 0) {
              firstList[i].style.visibility = 'hidden'
              firstList[i].style.overflow = 'hidden'
            }

            for (let j = 0, slen = secondList.length; j < slen; j++) { // 一个立方体由三个Side组成 j===level

              const level = secondList[j]

              level.style.transform = `translateZ(${(1 - j) * 80}px) rotateZ(0)`

              for (let k = 0, klen = secondList[j]['children'].length; k < klen; k++) { // 9个block

                const block = secondList[j]['children'][k]

                for (let m = 0, flen = block['children'].length; m < flen; m++) { // 6个方格grid

                  const girdDom = block['children'][m]

                  this.initColorMap(i, j, k, m, block, girdDom, level)

                  if (i === 0) {
                    girdDom.addEventListener('touchstart', (e) => {
                      e.preventDefault()
                      this.startTarchDom = e.target
                    }, {
                      capture: false,
                      passive: false,
                      once: false
                    })

                    const that = this

                    girdDom.addEventListener('touchend', function (e) {
                      e.preventDefault()

                      if (that.startTarchDom === null) return

                      that.endTarchDom = document.elementFromPoint(event.changedTouches[0].pageX, event
                        .changedTouches[0].pageY)
                      that.calcRotateMethod()
                      that.surfaceRotation()
                    }, {
                      capture: false,
                      passive: false,
                      once: false
                    })


                    // pc
                    girdDom.addEventListener('mousedown', (e) => {
                      this.startTarchDom = e.target
                    }, false)

                    girdDom.addEventListener('mouseup', function () {
                      if (that.startTarchDom === null) return
                      that.endTarchDom = this
                      that.calcRotateMethod()
                      that.surfaceRotation()
                    }, false)
                  }
                }
              }
            }
          }
        } catch (err) {
          console.log(err);
        }
      }

      // 计算那个魔方那个层绕Z轴旋转90度
      calcRotateMethod() {
        // startTarchDom 起始点, endTarchDom 结束点
        // direction 方向
        if (this.startTarchDom === null || this.endTarchDom === null) return
        if (this.startTarchDom === this.endTarchDom) return


        // console.log('this.startTarchDom===>', this.startTarchDom)
        // console.log('this.endTarchDom===>', this.endTarchDom)

        try {
          const {
            X: x1,
            Y: y1,
            Z: z1
          } = this.startTarchDom.dataset
          const {
            X: x2,
            Y: y2,
            Z: z2
          } = this.endTarchDom.dataset

          // console.log('x1,y1,z1===>', x1, y1, z1)
          // console.log('x2,y2,z2===>', x2, y2, z2)

          // const startToOrigin = Math.sqrt(x1^2 + y1^2 + z1^2)
          // const endToOrigin = Math.sqrt(x2^2 + y2^2 + z2^2)

          const startList = [x1, y1, z1]
          const endList = [x2, y2, z2]

          const distance = [x2 - x1, y2 - y1, z2 - z1]

          if (distance.filter(Boolean).length !== 1) return

          const rotateObj = {
            maxIndex: 0,
            minIndex: 0,
            midIndex: '',
            symbol: 0,
          }


          let maxItem = 0
          let minItem = 4
          let validate = -1

          startList.forEach((item, index) => {
            const el = endList[index]

            if (item === el) {
              validate++
              if (Math.abs(item - 3) > maxItem) {
                maxItem = Math.abs(item - 3)
                rotateObj.maxIndex = index
              }

              if (minItem > Math.abs(item - 3)) {
                minItem = Math.abs(item - 3)
                rotateObj.minIndex = index
              }
            } else {
              rotateObj.symbol = (el - item) / Math.abs(item - el)
              rotateObj.midIndex = index

              if ('135'.includes(el) && '135'.includes(item)) {
                validate++
              }
            }
          })

          if (validate !== 2) {
            return
          }
          // console.log('rotateObj===>', rotateObj);

          const temp = {
            'x': 1, // x = 0平面 旋转对应的魔方序号
            'y': 2, // y = 0平面
            'z': 0 // z = 0平面
          }

          this.rotateDirection[0] = temp[['x', 'y', 'z'][rotateObj.minIndex]]

          if (this.rotateDirection[0] === 0 || this.rotateDirection[0] === 2) {
            this.rotateDirection[1] = (5 - startList[rotateObj.minIndex]) / 2
          }
          if (this.rotateDirection[0] === 1) {
            this.rotateDirection[1] = (startList[rotateObj.minIndex] - 1) / 2
          }

          if (rotateObj.midIndex === 0) {
            this.rotateDirection[2] = rotateObj.symbol * (startList[rotateObj.maxIndex] - 3) / 3
            if (rotateObj.maxIndex === 1) {
              this.rotateDirection[2] = -this.rotateDirection[2]
            }
          }
          if (rotateObj.midIndex === 1) {
            this.rotateDirection[2] = rotateObj.symbol * (startList[rotateObj.maxIndex] - 3) / 3
          }
          if (rotateObj.midIndex === 2) {
            this.rotateDirection[2] = -rotateObj.symbol * (startList[rotateObj.maxIndex] - 3) / 3
          }

        } catch (err) {
          console.log('err===>', err);
        }
      }

      // 执行旋转动作
      surfaceRotation(time = 300) {
        // console.log('this.rotateDirection==>', this.rotateDirection)
        if (this.rotateDirection.every(item => item === 0)) return


        // console.log('this.baseList', this.baseList);
        try {
          for (let i = 0; i < this.baseList.length; i++) {
            if (i === this.rotateDirection[0]) {
              this.baseList[i].style.visibility = 'visible'
              this.baseList[i].style.overflow = 'visible'
              this['baseList'][this.rotateDirection[0]]['children'][this['rotateDirection'][1]]['style'][
                'transition'
              ] = `transform ${time}ms`
            } else {
              this.baseList[i].style.visibility = 'hidden'
              this.baseList[i].style.overflow = 'hidden'
            }
          }

          const node = this['baseList'][this.rotateDirection[0]]['children'][this['rotateDirection'][1]]

          const translateZ = this.getTransformInfo(node)[0] - 0
          const rotateZ = this.getTransformInfo(node)[1] - 0

          this['baseList'][this.rotateDirection[0]]['children'][this['rotateDirection'][1]]['style']['transform'] =
            `translateZ(${translateZ}px) rotateZ(${rotateZ + this.rotateDirection[2] * 90}deg)`

          setTimeout(() => {

            this.calcColorMap(this.rotateDirection[0])

            for (let i = 0; i < this.baseList.length; i++) {
              if (i !== this.rotateDirection[0]) {
                this.setCubeColorByColorSet(i)
              }
            }

            [...this.baseList].forEach((item, index) => {
              item.style.visibility = ['visible', 'hidden', 'hidden'][index]
              item.style.overflow = ['visible', 'hidden', 'hidden'][index]
            })

            if (this.validateSuccees()) {
              this.showMessage('恭喜！魔方还原完成！')
            }


            // 清空 还原
            this.rotateDirection[0] = 0
            this.rotateDirection[1] = 0
            this.rotateDirection[2] = 0

            this.startTarchDom = null
            this.endTarchDom = null

          }, time)
        } catch (err) {
          // 清空 还原
          this.rotateDirection[0] = 0
          this.rotateDirection[1] = 0
          this.rotateDirection[2] = 0

          this.startTarchDom = null
          this.endTarchDom = null
          console.log(err);
        }
      }

      bindRotate() {

        document.onmousedown = (e) => {
          if (e.target.toString().toLowerCase().includes('div')) return
          const originX = e.pageX;
          const originY = e.pageY;
          if (this.baseNode.style.transform === '') {
            this.baseNode.style.transform = 'rotateX(45deg) rotateY(45deg)'
          }

          const originRotateX = this.getTransformInfo(this.baseNode)[0]
          const originRotateY = this.getTransformInfo(this.baseNode)[1]

          document.onmousemove = (ev) => {
            const freshPageX = ev.pageX
            const freshPageY = ev.pageY

            let userRotateX, userRotateY

            this.getTransformInfo(this.baseNode)[0] || 45


            const directionX = this.getTransformInfo(this.baseNode)[0] || 45

            // console.log('方向===>', directionX);
            if ((90 > directionX && directionX > -90) || (-270 < directionX && directionX < -180) || (270 <
              directionX && directionX < 360)) {
              userRotateX = (-freshPageX + originX) / 500 * 360
            } else {
              userRotateX = (freshPageX - originX) / 500 * 360
            }
            userRotateY = (freshPageY - originY) / 500 * 360

            const X = ((originRotateX) - (userRotateY) - 0) % 360
            const Y = ((originRotateY) - (userRotateX) - 0) % 360

            this.baseNode.style.transform = `rotateX(${X}deg) rotateY(${Y}deg)`;
          }
          document.onmouseup = () => {
            document.onmousemove = null
          }
        }

        document.addEventListener('touchstart', (e) => {

          const _this = this

          if (e.target.toString().toLowerCase().includes('div')) return

          const originX = e['touches'][0].pageX;
          const originY = e['touches'][0].pageY;

          if (this.baseNode.style.transform === '') {
            this.baseNode.style.transform = 'rotateX(45deg) rotateY(45deg)'
          }

          const originRotateX = this.getTransformInfo(this.baseNode)[0]
          const originRotateY = this.getTransformInfo(this.baseNode)[1]

          const touchmove = function (ev) {
            ev.preventDefault();
            const freshPageX = ev.touches[0].pageX
            const freshPageY = ev.touches[0].pageY

            let userRotateX, userRotateY


            const directionX = _this.getTransformInfo(_this.baseNode)[0] || 45

            // console.log('方向===>', directionX);
            if ((90 > directionX && directionX > -90) || (-270 < directionX && directionX < -180) || (270 <
              directionX && directionX < 360)) {
              userRotateX = (-freshPageX + originX) / 500 * 360
            } else {
              userRotateX = (freshPageX - originX) / 500 * 360
            }
            userRotateY = (freshPageY - originY) / 500 * 360

            const X = ((originRotateX) - (userRotateY) - 0) % 360
            const Y = ((originRotateY) - (userRotateX) - 0) % 360

            _this.baseNode.style.transform = `rotateX(${X}deg) rotateY(${Y}deg)`;
          }

          document.addEventListener('touchmove', touchmove, {
            capture: false,
            passive: false,
            once: false
          })

          document.addEventListener('touchend', (event) => {

            document.removeEventListener('touchmove', touchmove)

          }, {
            capture: false,
            passive: false,
            once: false
          })


        }, {
          capture: false,
          passive: false,
          once: false
        })

      }

      initColorMap(i, j, k, m, block, girdDom, level) {

        const currColorClass = girdDom.classList[1]
        this.colorPosition[3] = currColorClass


        this.colorPosition[2] = [5, 3, 1][j]
        if (m === 5) {
          this.colorPosition[2] += 1
        }
        if (m === 4) {
          this.colorPosition[2] -= 1
        }

        if (m === 0) {
          this.colorPosition[0] = (block.offsetLeft - 0) / 40
          this.colorPosition[1] = (block.offsetTop - 0 + 40) / 40
        }
        if (m === 1) {
          this.colorPosition[0] = (block.offsetLeft - 0 + 40) / 40
          this.colorPosition[1] = (block.offsetTop - 0 + 80) / 40
        }
        if (m === 2) {
          this.colorPosition[0] = (block.offsetLeft - 0 + 80) / 40
          this.colorPosition[1] = (block.offsetTop - 0 + 40) / 40
        }
        if (m === 3) {
          this.colorPosition[0] = (block.offsetLeft - 0 + 40) / 40
          this.colorPosition[1] = (block.offsetTop - 0) / 40
        }
        if (m === 4 || m === 5) {
          this.colorPosition[0] = (block.offsetLeft - 0 + 40) / 40
          this.colorPosition[1] = (block.offsetTop - 0 + 40) / 40
        }

        // x: 1,3,4,5  0 2
        // Y: 0,2,4,5  1, 3


        const originRotateZ = this.getTransformInfo(level)[1] % 360

        if (originRotateZ === 90 || originRotateZ === -270) {
          this.colorPosition = [6 - this.colorPosition[1], this.colorPosition[0], this.colorPosition[2], this
            .colorPosition[3], this.colorPosition[4]
          ]
        }
        if (originRotateZ === 180 || originRotateZ === -180) {
          this.colorPosition = [6 - this.colorPosition[0], 6 - this.colorPosition[1], this.colorPosition[2], this
            .colorPosition[3], this.colorPosition[4]
          ]
        }
        if (originRotateZ === 270 || originRotateZ === -90) {
          this.colorPosition = [this.colorPosition[1], 6 - this.colorPosition[0], this.colorPosition[2], this
            .colorPosition[3], this.colorPosition[4]
          ]
        }
        // girdDom.innerText = `${this.colorPosition[0]},${this.colorPosition[1]},${this.colorPosition[2]}`

        // this.colorPosition[4] = girdDom.innerText
        // console.log('this.colorPosition===>', this.colorPosition);

        if (i === 1) {
          this.colorPosition = [6 - this.colorPosition[2], this.colorPosition[0], 6 - this.colorPosition[1], this
            .colorPosition[3], this.colorPosition[4]
          ]
        }
        if (i === 2) {
          this.colorPosition = [this.colorPosition[0], this.colorPosition[2], 6 - this.colorPosition[1], this
            .colorPosition[3], this.colorPosition[4]
          ]
        }

        const X = this.colorPosition[0]
        const Y = this.colorPosition[1]
        const Z = this.colorPosition[2]

        girdDom.dataset.Y = Y
        girdDom.dataset.X = X
        girdDom.dataset.Z = Z


        try {
          if (!this.colorMap[X]) {
            this['colorMap'][X] = {}
          }
          if (!this['colorMap'][X][Y]) {
            this['colorMap'][X][Y] = {}
          }
          if (!this.colorMap[X][Y][Z]) {
            this['colorMap'][X][Y][Z] = ''
          }

          this.colorMap[X][Y][Z] = currColorClass
        } catch (err) { }
      }

      // 记录第 i 个立方体的颜色
      calcColorMap(i = 0) {
        try {
          const firstList = this.baseList

          const secondList = firstList[i].children

          for (let j = 0, slen = secondList.length; j < slen; j++) { // 一个立方体由三个Side组成 j===level

            const level = secondList[j]

            for (let k = 0, klen = level['children'].length; k < klen; k++) { // 9个block

              const block = secondList[j]['children'][k]

              for (let m = 0, flen = block['children'].length; m < flen; m++) { // 6个方格grid

                const girdDom = block['children'][m]

                this.initColorMap(i, j, k, m, block, girdDom, level)
              }
            }
          }
          // console.log('colorSet===>', this.colorSet);
          // console.log('colorSet===>', this.colorSet);
        } catch (err) {
          console.log(err);
        }
      }

      // 设置第几个魔方的颜色
      setCubeColorByColorSet(i = 0) {
        try {
          const firstList = this.baseList
          const secondList = firstList[i].children

          for (let j = 0, slen = secondList.length; j < slen; j++) { // 一个立方体由三个Side组成 j===level

            const level = secondList[j]

            for (let k = 0, klen = level['children'].length; k < klen; k++) { // 9个block

              const block = secondList[j]['children'][k]

              for (let m = 0, flen = block['children'].length; m < flen; m++) { // 6个方格grid

                const girdDom = block['children'][m]
                const {
                  X,
                  Y,
                  Z
                } = girdDom.dataset

                if (girdDom.classList[1]) {
                  girdDom.classList.replace(girdDom.classList[1], this.colorMap[X][Y][Z])
                }
              }
            }
          }
          // console.log('colorSet===>', this.colorSet);
        } catch (err) {
          console.log(err);
        }
      }

      getTransformInfo(node) {
        return node.style.transform.match(/-?\d+(\.\d+)?/g)
      }

      // 随机

      random() {
        const tempRotateDirection = []
        tempRotateDirection.push(Math.floor(Math.random() * 3))
        tempRotateDirection.push(Math.floor(Math.random() * 3))
        tempRotateDirection.push([1, -1][Math.floor(Math.random() * 2)])
        return tempRotateDirection
      }


      test(r) {
        this.rotateDirection = r
        this.surfaceRotation(400)
      }

      disturbe() {
        let i = 0
        if (this.timer) {
          clearInterval(this.timer)
        }

        this.timer = setInterval(() => {
          this.rotateDirection = this.random()
          this.surfaceRotation(250)
          i++
          if (i === 20) {
            clearInterval(this.timer)
          }
        }, 268);
      }

      validateSuccees() {
        const leftList = []
        const rightList = []
        const topList = []
        const botList = []
        const frontList = []
        const backList = []

        Object.values(this.colorMap['0']).forEach(item => {
          leftList.push(...Object.values(item))
        })

        Object.values(this.colorMap['6']).forEach(item => {
          rightList.push(...Object.values(item))
        })

        const temp = ['1', '3', '5']

        temp.forEach(item => {
          frontList.push(...Object.values(this['colorMap'][item]['0']))
          backList.push(...Object.values(this['colorMap'][item]['6']))

          temp.forEach(ktem => {
            topList.push(this['colorMap'][item][ktem]['0'])
            botList.push(this['colorMap'][item][ktem]['6'])
          })
        })

        // _console.log('leftList===>', leftList);
        // _console.log('rightList===>', rightList);
        // _console.log('topList===>', topList);
        // _console.log('botList===>', botList);
        // _console.log('frontList===>', frontList);
        // _console.log('backList===>', backList);

        if (leftList.some(item => item !== leftList[0])) return false
        if (rightList.some(item => item !== rightList[0])) return false
        if (topList.some(item => item !== topList[0])) return false
        if (botList.some(item => item !== botList[0])) return false
        if (frontList.some(item => item !== frontList[0])) return false
        if (backList.some(item => item !== backList[0])) return false

        return true
      }

      // 自动还原方法
      async solve() {
        if (this.timer) {
          clearInterval(this.timer)
        }

        // 将当前魔方状态转换为Cube.js可识别的格式
        const cubeState = this.convertToFaceletString()
        // console.log('当前魔方状态:', cubeState)

        const solution = await this.getSolution(cubeState)

        this.handleSolution(solution)
      }

      handleSolution(solution) {
        if (!solution && solution !== "") {
          console.log('无法找到还原方案！')
          return
        }

        // 将Cube.js的解法转换为我们的旋转指令
        const moves = this.convertSolutionToMoves(solution)

        // 执行还原步骤
        let stepIndex = 0
        this.timer = setInterval(() => {
          if (stepIndex < moves.length) {
            this.rotateDirection = [...moves[stepIndex]]
            this.surfaceRotation(300)
            stepIndex++
          } else {
            clearInterval(this.timer)
            // 检查是否已经还原完成
            if (this.validateSuccees()) {
              console.log('还原完成！')
            } else {
              console.log('所有步骤执行完毕，但魔方未还原。')
            }
          }
        }, 400)
      }

      // 将魔方当前状态转换为Cube.js可识别的facelet字符串
      convertToFaceletString() {
        // 定义标准的魔方状态
        const FACE_SYMBOLS = ['U', 'R', 'F', 'D', 'L', 'B'];
        const FACES = ['top', 'right', 'front', 'down', 'left', 'back'];

        // 获取所有面的颜色数据
        const faceColors = {};
        // 第一步：收集所有面的颜色信息
        FACES.forEach(face => {
          const colors = this.getFaceColors(face);
          faceColors[face] = colors;
        });


        // 第二步：获取每个面的中心块颜色（这决定了面的颜色）
        const centerColors = {};
        FACES.forEach(face => {
          centerColors[face] = faceColors[face][4]; // 中心块在索引4
        });

        // console.log('faceColors,===>', faceColors);
        // console.log('centerColors===>', centerColors);

        // 第三步：建立颜色到面符号的映射
        const colorToSymbol = {};
        FACES.forEach((face, index) => {
          const centerColor = centerColors[face];
          colorToSymbol[centerColor] = FACE_SYMBOLS[index];
        });

        // console.log('colorToSymbol===>', colorToSymbol);

        // 按照标准魔方展开图顺序：
        // UUUUUUUUURRRRRRRRRFFFFFFFFFDDDDDDDDDLLLLLLLLLBBBBBBBBB
        // 依次拼接各面9个色块
        const faceOrder = [
          { symbol: 'U', face: 'top' },
          { symbol: 'R', face: 'right' },
          { symbol: 'F', face: 'front' },
          { symbol: 'D', face: 'down' },
          { symbol: 'L', face: 'left' },
          { symbol: 'B', face: 'back' },
        ];
        let state = '';
        faceOrder.forEach(({ face }) => {
          const colors = faceColors[face];
          const faceString = colors.map(color => colorToSymbol[color] || '?').join('');
          state += faceString;
        });

        // 验证状态
        if (state.length !== 54) {
          throw new Error(`状态字符串长度错误: ${state.length}`);
        }
        if (state.includes('?')) {
          throw new Error('状态字符串中存在未映射的颜色!');
        }

        return state;
      }

      async getSolution(cubeState) {
        const cube = Cube.fromString(cubeState);
        const asString = cube.asString()
        const solution = await cube.solve();
        return solution
      }

      // 将Cube.js的解法转换为我们的旋转指令
      convertSolutionToMoves(solution) {
        const moves = []
        const moveMap = {
          'U': [0, 2, -1],    // 上层顺时针
          'U\'': [0, 2, 1], // 上层逆时针
          'U2': [0, 2, 2],   // 上层180度

          'D': [0, 0, 1],   // 下层顺时针
          'D\'': [0, 0, -1],  // 下层逆时针
          'D2': [0, 0, 2],   // 下层180度

          'L': [1, 2, -1],    // 左层顺时针
          'L\'': [1, 2, 1], // 左层逆时针
          'L2': [1, 2, 2],   // 左层180度


          'R': [1, 0, 1],   // 右层顺时针
          'R\'': [1, 0, -1],  // 右层逆时针
          'R2': [1, 0, 2],   // 右层180度


          'F': [2, 0, 1],    // 前层顺时针
          'F\'': [2, 0, -1], // 前层逆时针
          'F2': [2, 0, 2],   // 前层180度
          // 基本动作
          'B': [2, 2, -1],   // 后层顺时针
          'B\'': [2, 2, 1],  // 后层逆时针
          'B2': [2, 2, 2],   // 后层180度
        }

        // 解析解法字符串
        const moveList = solution.split(' ').filter(move => move.length > 0)
        for (const move of moveList) {
          if (moveMap[move]) {
            moves.push(moveMap[move])
          } else {
            console.warn('未知的移动:', move)
            // 对于未知的移动，跳过
          }
        }

        return JSON.parse(JSON.stringify(moves))
      }

      // 获取某个面的颜色数组
      getFaceColors(face) {
        const colors = [];
        const temp =
          `
                    +------------+
                    | U1  U2  U3 |
                    |            |
                    | U4  U5  U6 |
                    |            |
                    | U7  U8  U9 |
        +------------+------------+------------+------------+
        | L1  L2  L3 | F1  F2  F3 | R1  R2  R3 | B1  B2  B3 |
        |            |            |            |            |
        | L4  L5  L6 | F4  F5  F6 | R4  R5  R6 | B4  B5  B6 |
        |            |            |            |            |
        | L7  L8  L9 | F7  F8  F9 | R7  R8  R9 | B7  B8  B9 |
        +------------+------------+------------+------------+
                    | D1  D2  D3 |
                    |            |
                    | D4  D5  D6 |
                    |            |
                    | D7  D8  D9 |
                    +------------+
        `
        try {
          switch (face) {
            // left (x = 6)
            case 'left':
              const rightOrder = [
                ['1', '1'], ['3', '1'], ['5', '1'],
                ['1', '3'], ['3', '3'], ['5', '3'],
                ['1', '5'], ['3', '5'], ['5', '5'],
              ];
              rightOrder.forEach(([y, z]) => {
                colors.push(this.colorMap['6'][y][z]);
              });
              break;

            // right (x = 0)
            case 'right':
              // 按照从上到下，从左到右的顺序
              const leftOrder = [
                ['5', '1'], ['3', '1'], ['1', '1'],
                ['5', '3'], ['3', '3'], ['1', '3'],
                ['5', '5'], ['3', '5'], ['1', '5'],
              ];
              leftOrder.forEach(([y, z]) => {
                colors.push(this.colorMap['0'][y][z]);
              });
              break;

            // up (z = 0)
            case 'top':
              const frontOrder = [
                ['5', '1'],
                ['3', '1'],
                ['1', '1'],

                ['5', '3'],
                ['3', '3'],
                ['1', '3'],

                ['5', '5'],
                ['3', '5'],
                ['1', '5'],
              ];
              frontOrder.forEach(([x, y]) => {
                if (this.colorMap[x] && this.colorMap[x][y]) {
                  colors.push(this.colorMap[x][y]['0']);
                } else {
                  console.error(`Missing color data for front face at x=${x}, y=${y}`);
                }
              });
              break;

            // down (z = 6)
            case 'down':
              const backOrder = [
                ['5', '5'],
                ['3', '5'],
                ['1', '5'],

                ['5', '3'],
                ['3', '3'],
                ['1', '3'],

                ['5', '1'],
                ['3', '1'],
                ['1', '1'],
              ];
              backOrder.forEach(([x, y]) => {
                if (this.colorMap[x] && this.colorMap[x][y]) {
                  colors.push(this.colorMap[x][y]['6']);
                } else {
                  console.error(`Missing color data for back face at x=${x}, y=${y}`);
                }
              });
              break;

            // front (y = 6)
            case 'front':
              const bottomOrder = [
                ['5', '1'], ['3', '1'], ['1', '1'],
                ['5', '3'], ['3', '3'], ['1', '3'],
                ['5', '5'], ['3', '5'], ['1', '5'],
              ];
              bottomOrder.forEach(([x, z]) => {
                // 检查数据路径是否存在
                if (this.colorMap[x] && this.colorMap[x]['6']) {
                  colors.push(this.colorMap[x]['6'][z]);
                } else {
                  console.error(`Missing color data for down face at x=${x}, z=${z}`);
                }
              });
              break;


            case 'back':
              // 上面 (y = 0)
              const topOrder = [
                ['1', '1'],
                ['3', '1'],
                ['5', '1'],

                ['1', '3'],
                ['3', '3'],
                ['5', '3'],

                ['1', '5'],
                ['3', '5'],
                ['5', '5'],
              ];
              topOrder.forEach(([x, z]) => {
                if (this.colorMap[x] && this.colorMap[x]['0'] && this.colorMap[x]['0'][z]) {
                  colors.push(this.colorMap[x]['0'][z]);
                } else {
                  console.error(`获取上方颜色失败: x=${x}, y=0, z=${z}`);
                }
              });
              break;
          }
          return colors;
        } catch (error) {
          console.error(`Error getting colors for ${face} face:`, error);
          console.error('Full colorMap structure:', JSON.stringify(this.colorMap, null, 2));
          throw error;
        }
      }
    }

    const base = new Base(document.getElementById('base'))
    base.init()
    window.test = base.test.bind(base);
    Cube.initSolver();
    // 每一个方块面叫grid

    // 每一个方块体叫block

    // 每一个侧边体叫side

    // 一个魔方有三个侧边体组成

    // 一共有三个魔方cube, 分别在绕着X轴 Y轴 Z旋转

    // 只能有一个显示

    // 事件加在grid 上面, 根据拖拽方向,  看由哪个魔方旋转实现动画
  </script>

</body>

</html>